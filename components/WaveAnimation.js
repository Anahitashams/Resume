// components/WaveAnimation.js
"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import { MorphSVGPlugin } from "gsap/MorphSVGPlugin";

gsap.registerPlugin(MorphSVGPlugin);

export default function WaveAnimation() {
  const pathRef = useRef(null);

  useEffect(() => {
    const tl = gsap.timeline({ repeat: -1, yoyo: true });

    const paths = [
      "M 0,500 L 0,187 C 61.6576,179.56 123.3153,172.121 170,174 C 216.6847,175.879 248.3965,187.076 285,184 C 321.6035,180.923 363.0987,163.573 412,145 C 460.9013,126.427 517.2086,106.631 570,108 C 622.7914,109.369 672.067,131.904 721,135 C 769.933,138.096 818.5235,121.752 864,119 C 909.4765,116.248 951.8391,127.087 994,152 C 1036.161,176.913 1078.12,215.9 1127,207 C 1175.88,198.1 1231.68,141.314 1285,130 C 1338.32,118.686 1389.16,152.843 1440,187 L 1440,500 L 0,500 Z",
      "M 0,500 L 0,187 C 59.3184,206.978 118.6368,226.956 168,240 C 217.3632,253.044 256.7711,259.154 296,257 C 335.2289,254.846 374.2789,244.429 417,225 C 459.7211,205.571 506.1133,177.131 560,185 C 613.8867,192.869 675.2679,237.048 727,263 C 778.7321,288.952 820.8149,296.678 865,271 C 909.1851,245.322 955.4723,186.241 1001,173 C 1046.5277,159.759 1091.296,192.358 1135,196 C 1178.7041,199.642 1221.344,174.326 1272,168 C 1322.656,161.674 1381.328,174.337 1440,187 L 1440,500 L 0,500 Z",
    ];

    tl.to(pathRef.current, {
      duration: 4,
      ease: "linear",
      morphSVG: { shape: paths[1] },
    }).to(pathRef.current, {
      duration: 4,
      ease: "linear",
      morphSVG: { shape: paths[0] },
    });
  }, []);

  return (
    <svg
      width="100%"
      height="100%"
      viewBox="0 0 1440 500"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        ref={pathRef}
        d="M 0,500 L 0,187 C 61.6576,179.56 123.3153,172.121 170,174 C 216.6847,175.879 248.3965,187.076 285,184 C 321.6035,180.923 363.0987,163.573 412,145 C 460.9013,126.427 517.2086,106.631 570,108 C 622.7914,109.369 672.067,131.904 721,135 C 769.933,138.096 818.5235,121.752 864,119 C 909.4765,116.248 951.8391,127.087 994,152 C 1036.161,176.913 1078.12,215.9 1127,207 C 1175.88,198.1 1231.68,141.314 1285,130 C 1338.32,118.686 1389.16,152.843 1440,187 L 1440,500 L 0,500 Z"
        fill="#1e3a8a"
      />
    </svg>
  );
}
