// components/WaveAnimation.js
"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import { MorphSVGPlugin } from "gsap/MorphSVGPlugin";

gsap.registerPlugin(MorphSVGPlugin);

export default function WaveAnimation() {
  const pathRef = useRef(null);

  useEffect(() => {
    const tl = gsap.timeline({ repeat: -1, yoyo: true });

    const paths = [
      "M 0,500 L 0,300 C 61.6576,290 123.3153,280 170,282 C 216.6847,284 248.3965,294 285,292 C 321.6035,290 363.0987,275 412,260 C 460.9013,245 517.2086,230 570,232 C 622.7914,234 672.067,255 721,258 C 769.933,261 818.5235,246 864,244 C 909.4765,242 951.8391,252 994,272 C 1036.161,292 1078.12,325 1127,317 C 1175.88,309 1231.68,260 1285,250 C 1338.32,240 1389.16,270 1440,300 L 1440,500 L 0,500 Z",
      "M 0,500 L 0,300 C 59.3184,320 118.6368,340 168,352 C 217.3632,364 256.7711,370 296,368 C 335.2289,366 374.2789,356 417,338 C 459.7211,320 506.1133,295 560,302 C 613.8867,309 675.2679,350 727,374 C 778.7321,398 820.8149,404 865,380 C 909.1851,356 955.4723,300 1001,288 C 1046.5277,276 1091.296,305 1135,308 C 1178.7041,311 1221.344,288 1272,282 C 1322.656,276 1381.328,288 1440,300 L 1440,500 L 0,500 Z",
    ];

    tl.to(pathRef.current, {
      duration: 4,
      ease: "linear",
      morphSVG: { shape: paths[1] },
    }).to(pathRef.current, {
      duration: 4,
      ease: "linear",
      morphSVG: { shape: paths[0] },
    });
  }, []);

  return (
    <svg
      width="100%"
      height="40%"
      viewBox="0 0 1440 500"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        ref={pathRef}
        d="M 0,500 L 0,300 C 61.6576,290 123.3153,280 170,282 C 216.6847,284 248.3965,294 285,292 C 321.6035,290 363.0987,275 412,260 C 460.9013,245 517.2086,230 570,232 C 622.7914,234 672.067,255 721,258 C 769.933,261 818.5235,246 864,244 C 909.4765,242 951.8391,252 994,272 C 1036.161,292 1078.12,325 1127,317 C 1175.88,309 1231.68,260 1285,250 C 1338.32,240 1389.16,270 1440,300 L 1440,500 L 0,500 Z"
        fill="#1e3a8a"
      />
    </svg>
  );
}
